clear all;
clc;
%code by deku878
R=[0.5 0.35 0.6];
P=[1 2 4 4].*1e9;
d=[2 2 4 4].*1e-6;
Q=[1 5 11 25].*1e7;
A = [
    -P(1)/Q(1), 0, 0, 0;
    0, -P(2)/Q(2), 0, 0;
    -R(1)*P(1)/Q(3), -R(2)*P(2)/Q(3), -P(3)/Q(3), 0;
    -R(1)*P(1)*R(3)/Q(4), -R(2)*P(2)*R(3)/Q(4), -P(3)*R(3)/Q(4), -P(4)/Q(4)
]       
B = [
    20 - P(1)/Q(1)
    20 - P(2)/Q(2)
    20 - R(1)*P(1)/Q(3) - R(2)*P(2)/Q(3) - P(3)/Q(3)
    20 - R(1)*P(1)*R(3)/Q(4) - R(2)*P(2)*R(3)/Q(4) - P(3)*R(3)/Q(4) - P(4)/Q(4)
]
x0=[0.2,0.2,0.2,0.2]
[res,abc]=fmincon(@(x) cost(x,d,P),x0,A,B)
function y=cost(x,d,P)
         y=sum(x.*d.*P);
end
       
